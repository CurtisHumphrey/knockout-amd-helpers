// knockout-amd-helpers 0.1.0 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
define(["knockout"],function(e){var t=window.require||window.curl,n=e.utils.unwrapObservable,i=function(e,t){var n,i=function(){return e.apply(this,t)};return i.prototype=e.prototype,n=new i,n.constructor=e,n};e.bindingHandlers.module={init:function(a,r,o,l,u){var s=r(),p=n(s),d={},m=e.bindingHandlers.module.initializer||"initialize";return"object"==typeof p&&(m=p.initializer||m,e.utils.arrayForEach(["afterRender","templateEngine"],function(e){p[e]&&(d[e]=p[e])})),a.firstChild||(d.name=function(){var e=n(s);return(e&&"object"==typeof e?n(e.template||e.name):e)||""}),d.data=e.observable(),d["if"]=d.data,e.applyBindingsToNode(a,{template:d},u),e.computed({read:function(){var a,r=n(s);r&&"object"==typeof r&&(a=[].concat(n(r.data)),r=n(r.name)),r&&t([e.bindingHandlers.module.baseDir+"/"+r+".js"],function(e){"function"==typeof e?e=i(e,a):e&&e[m]&&(e=e[m].apply(e,a)||e),d.data(e)})},disposeWhenNodeIsRemoved:a}),{controlsDescendantBindings:!0}},baseDir:"",initializer:"initialize"},function(e,t){var n=new e.nativeTemplateEngine,i={};n.defaultPath="templates/",n.defaultSuffix=".tmpl.html",e.templateSources.requireTemplate=function(t){this.key=t,this.template=e.observable(" "),this.requested=!1},e.templateSources.requireTemplate.prototype.text=function(){return!this.requested&&this.key&&(t(["text!"+n.defaultPath+this.key+n.defaultSuffix],this.template),this.requested=!0),this.key||this.template(""),0===arguments.length?this.template():void 0},n.makeTemplateSource=function(t,n){var a;return"string"==typeof t?(a=(n||document).getElementById(t),a&&"script"===a.tagName.toLowerCase()?new e.templateSources.domElement(a):(t in i||(i[t]=new e.templateSources.requireTemplate(t)),i[t])):!t||1!==t.nodeType&&8!==t.nodeType?void 0:new e.templateSources.anonymousTemplate(t)},e.amdTemplateEngine=n,e.setTemplateEngine(n)}(e,t)});