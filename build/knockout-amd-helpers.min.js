// knockout-amd-helpers 0.3.0 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
define(["knockout"],function(a){var b=window.require||window.curl,c=a.utils.unwrapObservable,d=function(a,b){var c,d=function(){return a.apply(this,b||[])};return d.prototype=a.prototype,c=new d,c.constructor=a,c},e=function(a){return a&&a.replace(/\/?$/,"/")};a.bindingHandlers.module={init:function(f,g,h,i,j){var k=g(),l=c(k),m={},n=a.bindingHandlers.module.initializer||"initialize";return l&&"object"==typeof l&&(n=l.initializer||n,m.templateEngine=l.templateEngine,m.afterRender=function(){var a=c(g());a&&"function"==typeof a.afterRender&&a.afterRender.apply(this,arguments)}),f.firstChild||(m.name=function(){var a=c(k);return(a&&"object"==typeof a?c(a.template||a.name):a)||""}),m.data=a.observable(),m["if"]=m.data,a.applyBindingsToNode(f,{template:m},j),a.computed({read:function(){var f,g=c(k);g&&"object"==typeof g&&(f=[].concat(c(g.data)),g=c(g.name)),m.data(null),g&&b([e(a.bindingHandlers.module.baseDir)+g],function(a){"function"==typeof a?a=d(a,f):a&&a[n]&&(a=a[n].apply(a,f)||a),m.data(a)})},disposeWhenNodeIsRemoved:f}),{controlsDescendantBindings:!0}},baseDir:"",initializer:"initialize"},a.virtualElements&&(a.virtualElements.allowedBindings.module=!0),function(a,b){var c=new a.nativeTemplateEngine,d={};c.defaultPath="templates",c.defaultSuffix=".tmpl.html",a.templateSources.requireTemplate=function(b){this.key=b,this.template=a.observable(" "),this.requested=!1},a.templateSources.requireTemplate.prototype.text=function(){return!this.requested&&this.key&&(b(["text!"+e(c.defaultPath)+this.key+c.defaultSuffix],this.template),this.requested=!0),this.key||this.template(""),0===arguments.length?this.template():void 0},c.makeTemplateSource=function(b,c){var e;return"string"==typeof b?(e=(c||document).getElementById(b),e&&"script"===e.tagName.toLowerCase()?new a.templateSources.domElement(e):(b in d||(d[b]=new a.templateSources.requireTemplate(b)),d[b])):!b||1!==b.nodeType&&8!==b.nodeType?void 0:new a.templateSources.anonymousTemplate(b)},a.amdTemplateEngine=c,a.setTemplateEngine(c)}(a,b)});